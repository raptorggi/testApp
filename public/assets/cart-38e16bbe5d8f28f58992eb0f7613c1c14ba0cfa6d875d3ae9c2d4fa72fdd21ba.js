function show_product(t){$("#cart-message").fadeIn("fast",function(){$("#cart-message").html(t+" "+$(this).data("text")),$("#cart-message").delay(2e3).fadeOut()})}function show_error_message(t){$("#cart-message").fadeIn("fast",function(){$("#cart-message").html(t),$("#cart-message").delay(2e3).fadeOut()})}function updateCartButton(){$("#cart-button").html(Cookies.get("products_quantity"))}function Cart(t){this.cartItems=[];var e=$(".cart-item");this.cartButton=$("#cart-button"),this.orderButton=t.find("#order-button"),this.totalPrice=t.find("#total-price");for(var a=0;a<e.length;a++)this.cartItems[a]=new CartItem(e[a]);Cart.prototype.recalculate=function(){for(var t=0,e=-1,a=0,s=0;s<this.cartItems.length;s++){var r=parseInt(this.cartItems[s].quantity.text());if(r<1){this.cartItems[s].self.remove(),Cookies.remove(this.cartItems[s].cookie),e=s;var i=$(".cart-index");for(s=0;s<i.length;s++)i[s].innerHTML=s+1}else t+=r,a+=parseInt(this.cartItems[s].price.text())*r,Cookies.set(this.cartItems[s].cookie,parseInt(this.cartItems[s].quantity.text()))}-1!=e&&(this.cartItems=this.cartItems.splice(e-1,1)),Cookies.set("products_quantity",t),this.cartButton.html(t),this.totalPrice.html(this.totalPrice.data("text")+" "+a),0==t&&this.orderButton.remove()}}function CartItem(t){this.self=$(t),this.cookie=this.self.data("cookie"),this.price=this.self.find("#price"),this.name=this.self.find("#name"),this.quantity=this.self.find("#quantity"),this.self.find(".js-button-cart-increase").click(function(){var t=$(this).prev();t.html(parseInt(t.text())+1),cart.recalculate()}),this.self.find(".js-button-cart-decrease").click(function(){var t=$(this).next();t.html(parseInt(t.text())-1),cart.recalculate()})}$(document).ready(function(){updateCartButton(),$("#cart").length&&(window.cart=new Cart($("#cart")),cart.recalculate()),$("[data-product-id]").click(function(){$.post("/products/"+$(this).data("product-id")+"/buy/",function(){$("#cart-button").html(Cookies.get("products_quantity"))}),show_product($(this).data("product-name"))})});